Перем ирПлатформа Экспорт;
Перем ирПерехватКлавиатуры Экспорт;

Процедура ПриНачалеРаботыСистемы()
	#Если Не ВебКлиент И Не МобильныйКлиент Тогда
	Если ирСервер.ПриНачалеРаботыСистемыРасширениеЛкс(ПараметрЗапуска) Тогда 
		ирКлиент.ПерезапуститьСеансПослеДобавленияРолиЛкс();
	Иначе
		ОткрытьОднократноАдаптациюРасширенияЛкс(ирПерехватКлавиатуры);
	КонецЕсли; 
	#КонецЕсли 
КонецПроцедуры

Процедура ОбработкаВнешнегоСобытия(Источник, Событие, Данные)
	#Если Не ВебКлиент И Не МобильныйКлиент Тогда
	Если Источник = "KeyboardHook" Тогда
		ВнешнееСобытиеЛкс(Источник, Событие, Данные);
	КонецЕсли;
	#КонецЕсли 
КонецПроцедуры
 
Процедура ПередЗавершениемРаботыСистемы(Отказ)
	#Если Не ВебКлиент И Не МобильныйКлиент Тогда
	ПередЗавершениемРаботыСистемыЛкс(Отказ);
	#КонецЕсли 
КонецПроцедуры

Процедура ПриЗавершенииРаботыСистемы()
	#Если Не ВебКлиент И Не МобильныйКлиент Тогда
	ПриЗавершенииРаботыСистемыЛкс();
	#КонецЕсли 
КонецПроцедуры
